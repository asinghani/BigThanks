<template name="redeemCredits">
    <h1>Redeem Credits</h1>

    <h3>
        <small>
            Redeem your credits in exchange for items
        </small>
    </h3>
    <br>
    <br>
    <p class="small-title">Current credits available: {{currentUser.profile.credits}}</p>
    <br>
    <br>

    <div id="items" class="col-lg-4 col-md-6 col-sm-8 col-sm-offset-2 col-md-offset-0"></div>
    <br>

    {{#if dataReady}}
        {{#each group in items}}
            <div class="row purchase-item-row">
                {{#each group.items}}
                    {{> purchasableItem}}
                {{/each}}
            </div>
        {{else}}
            No items are currently available for purchase. Try again later
        {{/each}}
    {{else}}
        {{> spinner}}
    {{/if}}

</template>

<template name="purchasableItem">
    <div class="col-lg-4 col-md-6 col-sm-8 col-sm-offset-2 col-md-offset-0">
        <div class="panel panel-default">
            <div class="panel-body">

                <!-- Image -->
                <div class="row">
                    <div class="col-md-10 col-xs-10 col-xs-offset-1">
                        <img src="{{image}}" style="height: 200px; width: auto; display: block; margin: auto;">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-7 col-xs-7">
                        <h4>{{name}}</h4>
                    </div>

                    <div class="col-md-5 col-xs-5">
                        <h4>
                            <label>{{cost}} Credits</label>
                        </h4>
                    </div>
                </div>

                <p>{{desc}}</p>
                <p>Sponsored by: {{sponsor}}</p>

                {{#if $gt stock 15}}
                    <p class="bold text-success">{{stock}} in stock</p>
                {{else}} {{#if $gt stock 0}}
                    <p class="bold text-warning">Only {{stock}} left in stock</p>
                {{else}}
                    <p class="bold text-danger">Out of stock</p>
                {{/if}}{{/if}}

                <div class="row">
                    <div class="col-md-6 col-xs-6">
                        <a href="{{website}}" target="_blank" class="btn btn-info" style="width:100%"> <span class="fa fa-info-circle"></span> More info</a>
                    </div>
                    <div class="col-md-6 col-xs-6">
                        <a href="#" class="btn btn-success btn-purchase" data-item="{{name}}" data-id="{{_id}}" data-credits={{cost}} style="width:100%" {{disabled}}> <span class="fa fa-shopping-cart"></span> Purchase</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>